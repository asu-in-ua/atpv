[<- До підрозділу](README.md)		[Коментувати](#feedback)

# Програмні сутності POU в в Machine Expert: теоретична частина

## POU

Термін Program Organizational Unit (**POU**) означає програмні об’єкти (програми, функціональні блоки, функції тощо), що використовуються для створення застосунку контролера. 

Відповідно до стандарту IEC 61131, POU є програмою, функціональним блоком або функцією. Однак у Machine Expert термін POU використовується в ширшому значенні для позначення програмних елементів загалом, які можуть містити IEC-код, таких як методи, властивості, інтерфейси тощо. Тому коли в документації йдеться про POU у більш вузькому значенні, визначеному IEC 61131, використовується термін **об’єкт POU** - програма, функція або функціональний блок. 

POU сам по собі не виконується після його створення. Для того щоб код, що міститься в POU, почав виконуватися, він має бути включений у виконувальний контекст застосунку. Це означає, що програмний POU повинен бути викликаний задачею (Task) або з іншого POU, який уже виконується в межах відповідної задачі. Лише після цього POU стає частиною циклу виконання PLC і бере участь у логіці керування.

POU можуть бути створені на глобальному рівні або в межах конкретного застосунку. POU, створені у глобальному вузлі Global дерева Applications tree, не прив’язані до конкретного пристрою і можуть повторно використовуватися в різних застосунках шляхом інстанціювання. POU, створені безпосередньо під застосунком, є локальними для цього застосунку і зазвичай використовуються для реалізації його конкретної логіки.

На рис.1 показаний приклад організації програми користувача в 2 PLC. У кожному застосунку означені свої POU, а один POU з назвою `POU_Global`  означено для всього проєкту через глобальний вузол `Global`. Усі вони є програмами (Program - PRG), написані на різних мовах, але наразі це не важливо. Наразі розглянемо як ці програми викликаються. Почнемо огляд з локальних для застосунків PLC програмних об'єктів. У застосунку PLC1 їх три: `Main`, `POU1` і `POU_SR`. Програми  `Main` і `POU1` викликаються в задачі `MAST`, це видно в дереві, так як їх імена вказані всередині гілки `MAST`. Зверніть увагу, що це не є копією однойменних програм, це саме їх виклик. Тому доступ до редагування цих програм можна однаково через подвійний клік по будь якій з них. Програма `POU_SR` викликається явно з `POU1` шляхом вказівки її назви відповідно до синтаксису мови ST.   

![image-20260206112044680](C:\san\народн посібн атпв\gitver\plc\pou\meidam241\image-20260206112044680.png)

рис.1. Приклади викликів POU

Програма `POU_Global` викликається в задачах MAST обидвох PLC, шляхом вказівки її назви в задачах `MAST`. Таким чином після побудови завантажуваного коду для цих PLC він записуватиметься в обидва. У цьому випадку кажуть, що POU інстанціюється в обидвох PLC. Так само, можна  викликати глобальні POU з інших POU. Використання глобальних POU спрощує створення розподілених застосунків з кількома PLC, де ряд програм будуть однакові, адже зміни робляться тільки в одному об'єкті POU, а інстанціювання в усіх потрібних.  



Об’єкти Program Organization Unit (POU) можна додавати до застосунку в дереві Applications tree, при цьому вибирається один із типів об'єктів:

- Program: під час виконання повертає одне або кілька значень. Усі значення зберігаються з моменту останнього виконання програми до наступного запуску. Програма може бути викликана іншим об’єктом POU.
- Function Block: під час виконання програми формує одне або кілька значень. На відміну від функції, значення вихідних змінних та необхідних внутрішніх змінних зберігаються між послідовними викликами функціонального блоку. Тому виклик функціонального блоку з однаковими аргументами (вхідними параметрами) не обов’язково завжди дає однакові вихідні значення.
- Function: під час обробки повертає рівно один елемент даних (який може складатися з кількох елементів, наприклад полів або структур). У текстових мовах виклик функції може використовуватися як оператор у виразах.

![image-20260206103557372](C:\san\народн посібн атпв\gitver\plc\pou\meidam241\image-20260206103557372.png)

## Program



## Function



## Function Block

Для кожного окремого об’єкта POU можна задати певні властивості (наприклад, умови збирання тощо).

## Автори


Теоретичне заняття розробив [Олександр Пупена](https://github.com/pupenasan). 

## Feedback

Якщо Ви хочете залишити коментар у Вас є наступні варіанти:

- [Обговорення у WhatsApp](https://chat.whatsapp.com/BRbPAQrE1s7BwCLtNtMoqN)
- [Обговорення в Телеграм](https://t.me/+GA2smCKs5QU1MWMy)
- [Група у Фейсбуці](https://www.facebook.com/groups/asu.in.ua)

Про проект і можливість допомогти проекту написано [тут](https://asu-in-ua.github.io/atpv/)
