[<- До підрозділу](README.md)		[Коментувати](#feedback)

# Приклад компонування контролера М340

Завдання. Підберіть складові ПЛК М340 для забезпечення його роботи за умов, наведених в таблиці 2.8. Вибрані складові сформуйте у вигляді відомості обладнання для компонування ПЛК. 

Таблиця 2.8

| Вимоги                                                       | Кількість або наявність |         |
| ------------------------------------------------------------ | ----------------------- | ------- |
| Живлення  ПЛК (24 VDC або 220  VAC)                          |                         | 220 VAC |
| Кількість  дискретних входів 24 VDC, позитивна логіка        | 59                      |         |
| Кількість  дискретних входів 115 VAC                         | 67                      |         |
| Кількість  аналогових входів 4-20 мА                         | 26                      |         |
| Кількість  аналогових входів 0-10 В                          | 15                      |         |
| Кількість дискретних виходів струм  комутації до 0,1 А 24 VDC | 74                      |         |
| Кількість дискретних виходів  струм комутації до 0,5 А 24 VDC | 23                      |         |
| Кількість дискретних виходів  струм комутації до 2 А 24 VDC  | 22                      |         |
| Кількість дискретних виходів  струм комутації до 3 А 24 VDC  | 21                      |         |
| Кількість  аналогових виходів 0-10 В                         | 20                      |         |
| Кількість  аналогових виходів 4-20 мА                        | 19                      |         |
| Підключення  по Modbus RTU на RS485                          | +                       |         |
| Підключення  по Modbus/TCP на Ethernet                       | +                       |         |
| Підключення  по CANOpen                                      | -                       |         |
| Програма  користувача займає (Кб)                            | 2500                    |         |

Варіант рішення. 

Компонування ПЛК М340 будемо проводити в такій послідовності: 

1. Вибір процесорного модуля.

2. Вибір модулів вводу/виводу.

3. Вибір аксесуарів для модулів вводу/виводу.

4. Компонування шасі, вибір додаткових модулів та аксесуарів для шасі.

5. Вибір модулів живлення.  

6. Вибір процесорного модуля. Процесорний модуль підбираємо за наступними критеріями: кількість каналів кожного типу, тип та кількість комунікаційних каналів, об’єм пам’яті користувача. 

- кількість аналогових входів + виходів: 26+15+20+19=80

- кількість дискретних входів + виходів: 59+67+74+23+22+21=266

За таблицею 2.1 підбираємо процесорний модуль. За кількістю каналів будь який процесорний модуль задовольняє умовам задачі, тому орієнтуємось тільки на ємність пам’яті та наявні комунікації. Серед процесорних модулів М340 підходить тільки BMX P34 2020.

2. Вибір модулів вводу/виводу проводиться за таблицями 2.2 та 2.4.  

Таблиця 2.9

| 59 ВД  24 VDC  | BMX  DDI6402K - 1 шт. (64 канали, з них - 5 вільних)         |
| -------------- | ------------------------------------------------------------ |
| 67  ВД 115 VAC | BMX  DAI1604 - 4 шт. (516=80 каналів, з  них -13 вільних)    |
| 21 ДВ  3 А     | BMX  DRA 0805 – 3 шт. (83=24 канали, з них - 3 вільних )     |
| 22 ДВ  2 А     | BMX  DRA 1605 – 2 шт. (162=32 канали, з них - 10 вільних)    |
| 23 ДВ  0,5 А   | BMX  DDO 1602 – 2 шт. (16 2=32 канали, з них 9 вільних)      |
| 74 ДВ  0,1 А   | BMX  DDO 6402K – 1 шт. (64 канали + 9 каналів з BMX DDO                   1602 + 1  канал з BMX  DRA 1605) |
| 26+15  ВА      | BMX  AMI 810 – 5 шт. (85=40 каналів) + BMX AMI 0410 – 1 шт. (4 канали) |
| 20 AB  U       | BMX  AMO 410 – 5 шт (45=20 каналів)                          |
| 19 АВ  I       | BMX  AMO 802 – 3 шт. (83=24 канали)                          |

  З метою зменшення вартості системи, для дискретних вихідних каналів малих струмів комутації ми задіяли вільні канали модулів з більшими струмами комутації. Слід зазначити, що наведений варіант компонування не єдине рішення для даної задачі, тобто може бути декілька варіантів компонування ПЛК модулями вводу/виводу.  

3. Вибір аксесуарів для модулів вводу/виводу проводиться за таблицями 2.3 та 2.5. Зведемо аксесуари та модулі в одну таблицю 2.10.

Таблиця 2.10.

| Модуль вводу/виводу  | Аксесуари |                            |           |                                                    |
| -------------------- | --------- | -------------------------- | --------- | -------------------------------------------------- |
| Найменування         | Кількість | Найменування               | Кількість | примітка                                           |
| BMX DDI6402K         | 1         | BMX FCC053                 | 2         | кабель  0.5 м,  з двома НЕ10 з’єднувачами          |
| Telefast ABE 7H16R21 | 4         | 16-канальний  клемний блок |           |                                                    |
| BMX DAI1604          | 4         | BMX FTB 2010               | 4         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX DRA 0805         | 3         | BMX FTB 2010               | 3         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX DRA 1605         | 2         | BMX FTB 2010               | 2         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX DDO 1602         | 2         | BMX FTB 2010               | 2         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX DDO 6402K        | 1         | BMX FCC053                 | 1         | кабель  0.5 м,  з двома НЕ10 з’єднувачами          |
| Telefast ABE 7H16R21 | 2         | 16-канальний  клемний блок |           |                                                    |
| BMX AMI 810          | 5         | BMX FTB 2820               | 5         | 28 контактна знімна клемна колодка                 |
| BMX AMI 0410         | 1         | BMX FTB 2010               | 1         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX AMO 410          | 5         | BMX FTB 2010               | 5         | 20  контактна знімна колодка з гвинтовими зажимами |
| BMX AMO 802          | 3         | BMX FTB 2010               | 3         | 20  контактна знімна колодка з гвинтовими зажимами |

4. Компонування шасі, вибір додаткових модулів та аксесуарів для шасі. Загальна кількість модулів разом з процесорним: 1 CPU + 6 DI + 8 DO + 6 AI + 8 AO = 29. Таким чином можна вибрати 2 монтажних шасі на 12 місць (BMX XBP 1200) та 1 шасі на 6 місць (BMX XBP 0600). До кожного шасі необхідно по 1-му модулю розширення, які зв’язуються BusX кабелями.  Тобто додатково треба модулі XBE 1000 - 3 шт.,  кабелі BMX XBC 008K – 2 шт. та один набір з двох термінаторів TSX TLY EX. 

Розміщення модулів в шасі вибираємо довільно. Однак на практиці, модулі з найбільшим споживанням струму розподіляють рівномірно між шасі. 

Для зручності підрахунку споживаної потужності кожним модулем, розміщення покажемо у вигляді таблиці 2.11. В цій таблиці заповнюємо тільки поля: шасі, місце та найменування модулів, за виключенням модулів живлення (місце PS).

5. Вибір модулів живлення. За умови задачі, живлення ПЛК проводиться напругою 220 VAC. Таким чином, в залежності від споживаної потужності модулів на шасі, необхідно вибрати один з двох модулів BMX CPS 2000 або BMX CPS 3500. Вважаємо, що вихід модуля для живлення датчиків та виконавчих механізмів (24V_SENOSRS) не використовується. Для кожного модуля шасі за таблицею 2.7 визначаємо середні споживані струми і вписуємо їх в таблицю 2.11. 

В рядках з місцем PS в колонках 3V3_BAC та 24V_BAC вказуються сумарні споживані струми по кожному шасі, та споживані потужності (IU). За таблицею 2.6 та з використанням формули (2.2) визначається який з модулів живлення підходить для живлення даного шасі. 

Таблиця 2.11

| Шасі                         | Модуль              | Середній споживаний струм, в мА   |                             |                                 |
| ---------------------------- | ------------------- | --------------------------------- | --------------------------- | ------------------------------- |
| місце                        | Найменування модуля | На виході  3V3_BAC                | На виході  24V_BAC          |                                 |
| 00                           | PS                  | BMX CPS 2000  P3V3_24V = 16,5 Вт  | I3V3_BAC=412мА, P=1.36Вт    | I24V_BAC=420мА,  P=10.08Вт      |
| SP=11,14Вт                   |                     |                                   |                             |                                 |
| 00                           | BMX P34 2020        | 0                                 | 95                          |                                 |
| 01                           | BMX DRA 0805        | 100                               | 55                          |                                 |
| 02                           | BMX DRA 0805        | 100                               | 55                          |                                 |
| 03                           | BMX DRA 0805        | 100                               | 55                          |                                 |
| 04                           | BMX DAI 1604        | 90                                | 0                           |                                 |
| 05                           |                     |                                   |                             |                                 |
| XBE                          | BMX XBE 1000        | 22                                | 160                         |                                 |
| 01                           | PS                  | BMX CPS 3500  P3V3_24V = 31,2 Вт  | I3V3_BAC=1522 мА, P=5,02 Вт | I24V_BAC=620мА , P=14,88 Вт     |
| SP=19,9 Вт                   |                     |                                   |                             |                                 |
| 00                           | BMX DDI 6402K       | 200                               | 0                           |                                 |
| 01                           | BMX DAI 1604        | 90                                | 0                           |                                 |
| 02                           | BMX DAI 1604        | 90                                | 0                           |                                 |
| 03                           | BMX DAI 1604        | 90                                | 0                           |                                 |
| 04                           | BMX DAI 1604        | 90                                | 0                           |                                 |
| 05                           | BMX DRA 1605        | 100                               | 95                          |                                 |
| 06                           | BMX DRA 1605        | 100                               | 95                          |                                 |
| 07                           | BMX DDO 1602        | 100                               | 0                           |                                 |
| 08                           | BMX DDO 1602        | 100                               | 0                           |                                 |
| 09                           | BMX DDO 6402K       | 240                               | 0                           |                                 |
| 10                           | BMX AMO 802         | 150                               | 135                         |                                 |
| 11                           | BMX AMO 802         | 150                               | 135                         |                                 |
| XBE                          | BMX XBE 1000        | 22                                | 160                         |                                 |
| 02  (замі-нити)  таб.  2.11а | PS                  | BMX CPS 3500  P3V3_24V = 31,2  Вт | I3V3_BAC=1822 мА, P=6,01 Вт | I24V_BAC=1310 мА ,   P=31,44 Вт |
| SP=37\,45 Вт                 |                     |                                   |                             |                                 |
| 00                           | BMX AMI 810         | 150                               | 54                          |                                 |
| 01                           | BMX AMI 810         | 150                               | 54                          |                                 |
| 02                           | BMX AMI 810         | 150                               | 54                          |                                 |
| 03                           | BMX AMI 810         | 150                               | 54                          |                                 |
| 04                           | BMX AMI 810         | 150                               | 54                          |                                 |
| 05                           | BMX AMI 0410        | 150                               | 45                          |                                 |
| 06                           | BMX AMO 0410        | 150                               | 140                         |                                 |
| 07                           | BMX AMIO  0410      | 150                               | 140                         |                                 |
| 08                           | BMX AMO 0410        | 150                               | 140                         |                                 |
| 09                           | BMX AMO 0410        | 150                               | 140                         |                                 |
| 10                           | BMX AMO 0410        | 150                               | 140                         |                                 |
| 11                           | BMX AMO 802         | 150                               | 135                         |                                 |
| XBE                          | BMX XBE 1000        | 22                                | 160                         |                                 |

Як видно з табл. 2.11, для шасі 00 задовольняє модуль живлення BMX CPS 2000, оскільки сумарна потужність по виходам 3V3_BAC та 24V_BAC не перевищує показники P3V3_24V та PPS для даного модуля. Для шасі 01 сумарна потужність по цим виходам 19,9026 Вт, що більше ніж максимально дозволена (16,5 Вт), отже необхідно вибирати модуль живлення BMX CPS 3500. Для шасі 02 сумарна потужність 37,45 Вт, що більша за максимально можливу потужність серед існуючих блоків живлення. Таким чином, розташування модулів в шасі 02 підібрано невдало. Один із способів вирішення даної задачі – заміна шасі 02 на два шасі на 6 позицій (шасі 02 та шасі 03) і розміщення модулів за типами (вхідні, вихідні). При цьому необхідно обов’язково зробити перерахунок блоків живлення для нової конфігурації.

Розрахунок нових шасі поданий в табл. 2.11а.

Таблиця 2.11а

| 02            | PS           | BMX CPS 2000  P3V3_24V = 16,5 Вт | I3V3_BAC=922 мА, P=3,0426 Вт | I24V_BAC=475 мА, P=11,4 Вт  |
| ------------- | ------------ | -------------------------------- | ---------------------------- | --------------------------- |
| SP=14,4426 Вт |              |                                  |                              |                             |
| 00            | BMX AMI 810  | 150                              | 54                           |                             |
| 01            | BMX AMI 810  | 150                              | 54                           |                             |
| 02            | BMX AMI 810  | 150                              | 54                           |                             |
| 03            | BMX AMI 810  | 150                              | 54                           |                             |
| 04            | BMX AMI 810  | 150                              | 54                           |                             |
| 05            | BMX AMI 0410 | 150                              | 45                           |                             |
| XBE           | BMX XBE 1000 | 22                               | 160                          |                             |
| 03            | PS           | BMX CPS 3500  P3V3_24V = 31,2 Вт | I3V3_BAC=922 мА, P=3,0426 Вт | I24V_BAC=995 мА, P=23,88 Вт |
| SP=26,9226 Вт |              |                                  |                              |                             |
| 00            | BMX AMO 410  | 150                              | 140                          |                             |
| 01            | BMX AMO 410  | 150                              | 140                          |                             |
| 02            | BMX AMO 410  | 150                              | 140                          |                             |
| 03            | BMX AMO 410  | 150                              | 140                          |                             |
| 04            | BMX AMO 410  | 150                              | 140                          |                             |
| 05            | BMX AMO 802  | 150                              | 135                          |                             |
| XBE           | BMX XBE 1000 | 22                               | 160                          |                             |

Результат. Перелік всіх необхідних складових М340 для даної задачі наведемо у вигляді відомості в таблиці 2.12.

Таблиця 2.12

Відомість обладнання для компонування ПЛК М340

| Позиція | Найменування         | Кількість | Примітка                                           |
| ------- | -------------------- | --------- | -------------------------------------------------- |
|         | BMX XBP 1200         | 1         | шасі на 12 місць                                   |
|         | BMX XBP 0600         | 3         | шасі на 6 місць                                    |
|         | BMX XBE 1000         | 4         | модуль розширення                                  |
|         | TSX TLY EX           | 1         | комплект з двох термінаторів BusX                  |
|         | BMX XBC 008K         | 3         | BusX кабель 0,8 м                                  |
|         | BMX CPS 2000         | 1         | модуль живлення 100…240 VAC, 20 Вт                 |
|         | BMX CPS 3500         | 2         | модуль живлення 100…240 VAC, 36 Вт                 |
|         | BMX P34 2020         | 1         | процесорний модуль, Serial + Ethernet              |
|         | BMX DDI6402K         | 1         | дискретний вхідний модуль на 64 канали             |
|         | BMX DAI1604          | 5         | дискретний вхідний модуль на 16 каналів            |
|         | BMX DRA 0805         | 3         | дискретний вихідний модуль на 8 каналів            |
|         | BMX DRA 1605         | 2         | дискретний вихідний модуль на 16 каналів           |
|         | BMX DDO 1602         | 2         | дискретний вихідний модуль на 16 каналів           |
|         | BMX DDO 6402K        | 1         | дискретний вихідний модуль на 64 канали            |
|         | BMX AMI 810          | 5         | аналоговий вхідний модуль на 8 каналів             |
|         | BMX AMI 0410         | 1         | аналоговий вхідний модуль на 4 канали              |
|         | BMX AMO 410          | 5         | аналоговий вихідний модуль на 4 канали             |
|         | BMX AMO 802          | 3         | аналоговий вихідний модуль на 8  каналів           |
|         | BMX FTB 2010         | 20        | 20 контактна з’ємна колодка з гвинтовими  зажимами |
|         | BMX FTB 2820         | 5         | 28 контактна з’ємна  клемна колодка                |
|         | Telefast ABE 7H16R21 | 6         | 16-канальний клемний блок                          |
|         | BMX FCC053           | 3         | кабель 0.5 м, з двома НЕ10 з’єднувачами            |



## Автори


Теоретичне заняття розробив [Олександр Пупена](https://github.com/pupenasan). 

## Feedback

Якщо Ви хочете залишити коментар у Вас є наступні варіанти:

- [Обговорення у WhatsApp](https://chat.whatsapp.com/BRbPAQrE1s7BwCLtNtMoqN)
- [Обговорення в Телеграм](https://t.me/+GA2smCKs5QU1MWMy)
- [Група у Фейсбуці](https://www.facebook.com/groups/asu.in.ua)

Про проект і можливість допомогти проекту написано [тут](https://asu-in-ua.github.io/atpv/)
