[<- До підрозділу](README.md)		[Коментувати](#feedback)

# Конфігурування локальної та розподіленої системи I/O M241 в Machine Expert 

**Тривалість**: 2 год 

**Мета:** Навчитися встановлювати та запускати EcoStruxure Machine Expert  та імітатор PLC.

## Лабораторна установка.

**Необхідне апаратне забезпечення.** Для проведення лабораторних робіт необхідно мати комп’ютер з наступною мінімальною апаратною конфігурацією:

- CPU Intel/AMD 2 ГГц / RAM 16 ГБ / Диск 20 ГБ (вільних)  

**Необхідне програмне забезпечення.** 

1. Дистрибутив Schneider Electric Software Installer (завантажується під час встановлення)
2. Передбачається використання віртуальної машини з Virtual Box (https://www.virtualbox.org).

2) Інтернет-браузер та доступ до Інтернет. 

**Загальна постановка задачі**. 

Цілі роботи: 

1) 

## Послідовність виконання роботи

### 1. Конфігурування локального вводу/виводу

- [ ] Запустіть Machine Expert

- [ ] Створіть новий проєкт на основі `Default Project` з наступними налаштуваннями:
  - тип контролера `TM241CE24T/U` (за замовченням)
  - назва контролера `PLC1`
  - мова основної секції `SR_main ` - `ST`
  - назва проєкту `Labm241hard`

- [ ] У апаратній архітектурі (Devices Tree) відкрийте налаштування дискретних входів, виставте наступні налаштування:
  -  на одному із входів змініть значення фільтрації
  - на одному із входів відмовтеся від фільтрації
  - на одному із входів виберіть режим фіксації коротких імпульсів
  - на одному із входів виберіть режим запуску задачі по спадаючому фронту
  - на одному із входів виберіть режим запуску задачі по обом фронтам

![image-20260202183330946](mediam241/image-20260202183330946.png)

рис.1. Налаштування конфігурації входів

- [ ] Сконфігуруйте виходи так, щоб:
  - реактивація виходів після короткого замикання відбувалася вручну (з програми)
  - вихід Q5 спрацьовував при роботі PLC і відключався, коли він переходить в Стоп  
- [ ] У програмній конфігурації в GVL означте змінну `sw1`

![image-20260203133313085](mediam241/image-20260203133313085.png)

рис.2.

- [ ] Зробіть відображення змінних на входи, як показано на рис. 3

![image-20260203133739234](mediam241/image-20260203133739234.png)

рис.3. 

- [ ] Створіть `POU_EVT1` та `POU_EVT2` типу POU з мовою `ST`
- [ ] Створіть задачі `EVT1` та `EVT2` типу `External` з різними пріоритетами. Кожна задача викликається входом з функцією `Event` . Прив'яжіть `POU_EVT1` та `POU_EVT2` відповідно до задач `EVT1` та `EVT2`. 

![image-20260203134921606](mediam241/image-20260203134921606.png)

### 2. Робота з емулятором

- [ ] Переключіться в режим емуляції ПЛК
- [ ] Зробіть побудову (Build), виправте помилки, якщо такі мають місце
- [ ] З'єднайтеся з емулятором ПЛК і завантажте туди проєкт
- [ ] Запустіть проєкт на виконання
- [ ] Змініть значення перших трьох входів, подивіться на стан `DIW1`, поясніть чому він має таке значення 

![image-20260203135407414](mediam241/image-20260203135407414.png)



- [ ] Відкрийте вікно Watch `View->Watch->Watch1`
- [ ] Добавте у вікно Watch змінні `%IW0`, `%IX0.0`, `%IX0.1` , `%IX0.1`
- [ ] Через контекстне меню зробіть відображення `%IW0` у вигляді `Binary`
- [ ] Подивіться на значення змінних, і зверніть увагу на  `%IX0.1`, чому воно має таке значення?

![image-20260203135627435](mediam241/image-20260203135627435.png)

- [ ] Відключіться від емулятора 

### 3. Конфігурування локального розширення вводу/виводу

- [ ] Використовуючи контекстне меню для `Cartridge` або через кнопку `+` викличте вікно добавлення опції

  ![image-20260203142528609](mediam241/image-20260203142528609.png)

- [ ] Добавте картридж на 2 аналогові входи

![image-20260203142638916](mediam241/image-20260203142638916.png)

- [ ] Відкрийте налаштування картриджа, сконфігуруйте параметри обробки каналів

![image-20260203142822485](mediam241/image-20260203142822485.png)

- [ ] Змініть налаштування I/O Mapping

![image-20260203143026101](mediam241/image-20260203143026101.png)

- [ ] Використовуючи контекстне меню для `IO_BUS` або через кнопку `+` викличте вікно добавлення модулів  

![image-20260203141335802](mediam241/image-20260203141335802.png)

- [ ] Добавте модулі TM3:
  - Один аналоговий вхідний  
  - Один аналоговий вихідний
  - Один аналоговий змішаний
  - Один дискретний вхідний
  - Один дискретний вихідний

![image-20260203142127443](mediam241/image-20260203142127443.png)

- [ ] Змініть налаштування усіх аналогових вхідних та вихідних модулів на діапазони 0-10V або 4-20 mA
- [ ] Змініть налаштування дискретних виходів щоб вони були в режимі `Fallback Mode` 
- [ ] Зробіть побудову (Build), виправте помилки, якщо такі мають місце

### 4. Конфігурування віддалеого розширення вводу/виводу

- [ ] У `IO_BUS` вставте модуль для розширення локального блоку PLC `TM3XTRA1` з розділу  `TM3 Expert I/O Module`  

  ![image-20260203143948624](mediam241/image-20260203143948624.png)

- [ ] Автоматично в межах даного модуля добавиться ще один. Перейменуйте обидва модулі, на зрозумілу для Вас назву
- [ ] Добавте кілька модулів у віддалену частину, один з яких для температурних входів

![image-20260203144757177](mediam241/image-20260203144757177.png)

- [ ] Налаштуйте канали модулю температурних входів на роботу з PT100
- [ ] Зробіть побудову (Build), виправте помилки, якщо такі мають місце

### 5. Конфігурування розподіленого вводу/виводу



## Автори


Практичне заняття розробив  [Олександр Пупена](https://github.com/pupenasan). 

## Feedback

Якщо Ви хочете залишити коментар у Вас є наступні варіанти:

- [Обговорення у WhatsApp](https://chat.whatsapp.com/BRbPAQrE1s7BwCLtNtMoqN)
- [Обговорення в Телеграм](https://t.me/+GA2smCKs5QU1MWMy)
- [Група у Фейсбуці](https://www.facebook.com/groups/asu.in.ua)

Про проект і можливість допомогти проекту написано [тут](https://asu-in-ua.github.io/atpv/) 